#! /bin/bash

#
# A more concise and comprehensive version of `git status` and `git log` in one command.
#

help()
{
    man git-state
    return
}

while getopts ":h-:" opt; do
    case $opt in
        -)
            case "${OPTARG}" in
                help)
                    help
                    exit 0
                    ;;
                *)
                    echo "Unimplemented option --${OPTARG}" >&2
                    exit 1
                    ;;
            esac
            ;;
        h)
            help
            exit 0
            ;;
        \?) 
            echo "Invalid option: -$OPTARG" >&2
            exit 1
            ;;
        *)  
            echo "Unimplemented option: -$OPTARG" >&2
            exit 1
            ;;
    esac
done

green='\x1B[0;32m'
nocolor='\x1B[0m'

git status --short --branch
echo -e "## ${green}log${nocolor}"
git log -10 --oneline
echo -e "## ${green}branches${nocolor}"
git branch -v
echo -e "## ${green}stashes${nocolor}"
git stash list --oneline

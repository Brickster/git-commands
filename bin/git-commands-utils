#! /bin/bash

readonly _VERSION="0.1.0"

#
# Echo text to stderr but do not exit.
#
# $1: the text to echo
#
function error_and_continue
{
    echo "error: $1" >&2
}

#
# Echo text to stderr and exit.
#
# $1: the text to echo
#
function error
{
    error_and_continue "$1"
    exit 1
}

#
# Shows the script's man page.
#
function show_help
{
    man "${0##*/}"
    exit 0
}

#
# Print version information
#
# $1: the version
#
function show_version
{
    echo "$1"
    exit 0
}

#
# Prints a usage error.
#
# $@: a list of usage strings
#
function usage_error
{
    if (( $# == 0 )); then
        error "usage_error requires at least one argument"
    fi

    echo "usage: $1"
    local arg=
    for arg in "${@:2}"; do
        echo "   or: $arg"
    done
    exit 1
}

#
# Determines if an array contains a given element.
#
# $1: the element to find
# $2: the array to search in
#
function array_contains
{
    local e
    for e in "${@:2}"; do
        if [[ "$e" == "$1" ]]; then
            return 0
        fi
    done
    return 1
}

while getopts ":v-:" opt; do
    case $opt in
        -)
            case "${OPTARG}" in
                version)    show_version "$_VERSION";;
            esac
            ;;
        v)  show_version "$_VERSION";;
    esac
done
OPTIND=1

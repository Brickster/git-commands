#! /usr/bin/env python

import argparse

from commands import fixup


def main():

    parser = argparse.ArgumentParser(
        prog="git fixup",
        version="git-fixup 0.2.0",
        description="commits staged changes as an autosquashable fixup"
    )

    # <commit>
    parser.add_argument(
        "commit",
        help="the commit to fixup into (default: HEAD)",
        nargs="?",
        default="HEAD",
        metavar="<commit>"
    )

    # -a|--all
    parser.add_argument(
        "-a",
        "--all",
        help="stage all files",
        action="store_true"
    )

    # -b|--body
    parser.add_argument(
        "-b",
        "--body",
        help="the message body to use in the fixup commit",
        metavar="<message>"
    )

    fixup.fixup(**vars(parser.parse_args()))

if __name__ == "__main__":
    main()
